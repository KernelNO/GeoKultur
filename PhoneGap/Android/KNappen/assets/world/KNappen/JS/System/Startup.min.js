var System,startup;(function(n){var t=function(){function n(){this.loadCountdownMs=10,this.loadIntervalCheckMs=100,this.autoStartup=!0,this.eventHooks=$(this)}return n.prototype.addLoad=function(n,t){this.addEventHandler("Load",n,t)},n.prototype.addPreInit=function(n,t){this.addEventHandler("PreInit",n,t)},n.prototype.addInit=function(n,t){this.addEventHandler("Init",n,t)},n.prototype.addPostInit=function(n,t){this.addEventHandler("PostInit",n,t)},n.prototype.addEventHandler=function(n,t,i){this.eventHooks.on(n,function(){try{t()}catch(r){var u=r;log.error("Startup","["+n+"] Exception in event handler: ModuleName: "+(i||"unknown")+": "+u)}})},n.prototype.shortcutLoadTimeout=function(){this.loadCountdownMs>0&&(log.debug("Startup","Shortcutting load timeout."),this.loadCountdownMs=this.loadIntervalCheckMs,this.waitForLoadContinue())},n.prototype.waitForLoadContinue=function(){var n=this;if(!(this.loadCountdownMs<0)){if(this.loadCountdownMs-=this.loadIntervalCheckMs,this.loadCountdownMs>this.loadIntervalCheckMs/2){setTimeout(function(){n.waitForLoadContinue()},this.loadIntervalCheckMs);return}this.loadCountdownMs=-1,log.debug("Startup","Load timeout, proceeding with startup procedure."),setTimeout(function(){n.eventHooks.trigger("PreInit"),setTimeout(function(){n.eventHooks.trigger("Init"),setTimeout(function(){n.eventHooks.trigger("PostInit")},10)},10)},10)}},n.prototype.executeStartup=function(){var n=this;setTimeout(function(){n.eventHooks.trigger("Load"),n.waitForLoadContinue()})},n}();n.Startup=t})(System||(System={})),startup=new System.Startup,$(function(){startup.autoStartup&&startup.executeStartup()})