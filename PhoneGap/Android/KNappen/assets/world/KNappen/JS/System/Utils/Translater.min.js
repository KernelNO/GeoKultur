var System,translater,tr;(function(n){(function(n){var t=function(){function n(){this.strings={},this.regexMatchConf=new RegExp("^CONFIG:(.*)","i")}return n.prototype.PreInit=function(){log.debug("Translator","PreInit()"),translater.translateAllClasses()},n.prototype.translate=function(n,t){var r,u;typeof t=="undefined"&&(t=null);var f=n.toUpperCase(),e=this.strings[f],i=e;return(i||(i=n),t&&i&&(i=i.replace(/{([^{}]*)}/gm,function(n,i){return t[i]})),e)?(log.verboseDebug("Translater","Returning translation for key "+f+": "+i+""),i):(r=this.regexMatchConf.exec(n),r&&r[1])?(u=config[r[1]],log.verboseDebug("Translater","Returning config for translation key "+r[0]+": "+u+""),u):(log.error("Translater","Unable to find translation for: '"+n+"'"),i)},n.prototype.translateSubString=function(n){var t=this;return n.replace(/\$T\[([^\]]+)\]/gm,function(n,i){return t.translate(i)})},n.prototype.translateSubStringHtmlElementByName=function(n){var t=$("#"+n);this.translateSubStringHtmlElement(t)},n.prototype.translateSubStringHtmlElement=function(n){var t=n.html(),i=this.translateSubString(t);t===i||n.html(i)},n.prototype.translateAllClasses=function(){log.debug("Translator","translateAllClasses(): Iterating DOM");var t=this,n=0;$("body .translate").each(function(){t.translateSubStringHtmlElement($(this)),n++}),log.debug("Translator","translateAllClasses(): Done iterating DOM: "+n+" elements processed")},n.prototype.addTranslation=function(n,t){this.strings[n.toUpperCase()]=t},n}();n.Translater=t})(n.Utils||(n.Utils={}));var t=n.Utils})(System||(System={})),translater=new System.Utils.Translater,tr=translater,startup.addPreInit(function(){translater.PreInit()})