var System,phoneGapProvider;(function(n){(function(n){var t=function(){function n(){}return n.prototype.SqlSetKey=function(n,t,i,r){this.sendPhoneGapCommand("sql","remove",{table:n,key:t,value:i,meta:r})},n.prototype.SqlRemoveKey=function(n,t){this.sendPhoneGapCommand("sql","remove",{table:n,key:t})},n.prototype.SqlRead=function(n){this.sendPhoneGapCommand("sql","read",{table:n})},n.prototype.SqlCallbackSet=function(n,t,i){storageProvider.setRaw(n,t),storageProvider.setRaw(n+".meta",serializer.deserializeJSObject(i))},n.prototype.openUrl=function(n){var t=document;t.location=this.fixUrl(n)},n.prototype.fixUrl=function(n){return"architectsdk://system?action=openUrl&url="+encodeURIComponent(n)},n.prototype.fixALinksIfPhoneGap=function(n){var t=this;compatibilityInfo.isPhoneGap?this.fixALinks(n):$(n).find("a").each(function(){$(this).attr("target","_blank")})},n.prototype.fixALinks=function(n){var t=this;$(n).find("a").each(function(){var n=$(this).attr("href");stringUtils.startsWith(n,"architectsdk")||$(this).attr("href",t.fixUrl(n))})},n.prototype.sendExit=function(){this.sendPhoneGapCommand("system","exit")},n.prototype.sendPhoneGapCommand=function(n,t,i){var r="architectsdk://"+n+"?action="+encodeURIComponent(t),u;i&&$.each(i,function(n,t){n&&(r+="&"+encodeURIComponent(n),t&&(r+="="+encodeURIComponent(t)))}),log.debug("PhoneGapProvider",'Sending command type "'+n+'" action "'+t+'" to PhoneGap: '+r),u=document,u.location=r},n.prototype.callbackMenuButton=function(){$("#mainPopupMenu").toggle()},n.prototype.callbackBackButton=function(){log.debug("PhoneGapProvider","Back button pressed. Navigating back.");var n=viewController.goBack();n||(log.debug("PhoneGapProvider","No more navigation history - exiting app."),this.sendExit())},n.prototype.callbackSqlReadSuccess=function(){log.debug("PhoneGapProvider","PhoneGapInterop reports success on SQL read."),startup.shortcutLoadTimeout()},n.prototype.callbackSqlReadError=function(n,t){log.debug("PhoneGapProvider","PhoneGapInterop reports error on SQL read: Code: "+n+", message: "+t),startup.shortcutLoadTimeout()},n.prototype.callbackGeoLocationUpdate=function(n,t,i,r,u,f,e,o){gpsProvider.setPos(n,t,i,r,u,f,e,o)},n}();n.PhoneGapProvider=t})(n.Providers||(n.Providers={}));var t=n.Providers})(System||(System={})),phoneGapProvider=new System.Providers.PhoneGapProvider