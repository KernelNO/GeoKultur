var App,arController;(function(n){(function(n){var t=function(){function n(){this._this=this}return n.prototype.PreInit=function(){templateProvider.queueTemplateDownload(config.templatePOIAR)},n.prototype.Init=function(){log.debug("ARController","Init()"),viewController.addPreSelectEvent(this.onViewChangedPre),viewController.addSelectEvent(this.onViewChanged);var n=this.renderView;searchController.addSearchResultCallback(function(t,i){n(this._this,i)}),arProvider.addPoiClickHandler(function(n,t){var i=t;poiController.OpenPreview(i,!0)})},n.prototype.renderView=function(n,t){log.debug("ARController","renderView()"),arProvider.resultToPoI(t.items,function(n){var i=n,t=templateProvider.getReplacementKeys(i);return t.iconCategoryURL(config.fixLocalFileRef(t.iconCategoryURL())),templateProvider.getTemplate(config.templatePOIAR,t)})},n.prototype.onViewChangedPre=function(n,t){t&&t.name=="arView"&&(log.debug("ARController","View changed away from AR: Disabling camera"),arProvider.enableAR(!1),$("body").css("background-color",this.oldBodyBackgroundColor),$("body").css("height",this.oldBodyHeight),$("html").css("height",this.oldHtmlHeight),$("#headerSection").css("height",this.oldHeaderSectionHeight),$("#mainSection").show(),$("#headerSectionSize").show(),$("#logoFrame").show(),$("#footerSection").show())},n.prototype.onViewChanged=function(n,t,i){t||$("#arMenu").hide(),i.name=="arView"&&(log.debug("ARController","View changed to AR: Enabling camera"),arProvider.enableAR(!0),this.oldBodyBackgroundColor=$("body").css("background-color"),this.oldBodyHeight=$("body").css("height"),this.oldHtmlHeight=$("html").css("height"),this.oldHeaderSectionHeight=$("#headerSection").css("height"),$("body").css("background-color","transparent"),$("body").css("height","0"),$("html").css("height","0"),$("#mainSection").hide(),$("#headerSectionSize").hide(),$("#logoFrame").hide(),$("#headerSection").css("height","24"),$("#footerSection").hide())},n}();n.ARController=t})(n.Controllers||(n.Controllers={}));var t=n.Controllers})(App||(App={})),arController=new App.Controllers.ARController,startup.addInit(function(){arController.Init()},"ARController"),startup.addPreInit(function(){arController.PreInit()},"ARController")