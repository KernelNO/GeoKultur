var App;(function(n){(function(t){var i=function(){function t(){}return t.prototype.search=function(t,i,r){if(log.debug("DataSourceDigitalarkivetProperty","Searching"),!t.pos()||!t.pos().lat()||!t.pos().lon()){log.debug("DataSourceDigitalarkivetProperty","Have no pos. Search not possible.");return}var u=this.searchCriteriaToDigitalArkivetUrl(t);log.info("DataSourceDigitalarkivetProperty","Search URL: "+u),$.getJSON(u,function(t){var e,f,r;log.info("DataSourceDigitalarkivetProperty","Processing result from: "+u),e=t.results,f=[],$.each(e,function(t,i){var r=new n.Models.PointOfInterest;r.source("digitalarkivet"),r.sourceType("fagdata"),r.id(i.autoid),r.name(i.gaardsnavn_gateadr),r.year(i.hendelsesdato||""),r.institution(i.kildenavn||""),r.owner("Digitalarkivet"),r.creator(""),r.landingPage(i.kildeside||""),r.tags(i.kildetype||""),r.ingress(i.kildenavn||""),r.body(""),r.license(i.lisenstype||""),r.year(i.startaar||""),r.thumbnail(""),r.categories.push(config.digitakArkivetPropertyCategory),r.linkMoreInfo(""),r.pos(new System.Models.Position(i.latitude,i.longitude)),f.push(r)}),r=new n.Models.SearchResult,r.numFound(t.total_found),r.items(f),i(r)}).fail(function(n,t,i){r(i)})},t.prototype.searchCriteriaToDigitalArkivetUrl=function(n){return"http://api.digitalarkivet.arkivverket.no/v1/census/1910/search_property_geo?latitude="+n.pos().lat()+"&longitude="+n.pos().lon()+"&presicion="+n.radius()*1e3+"&limit="+n.rows()+"&page="+n.pageNumber()},t}();t.DataSourceDigitalarkivetProperty=i})(n.SearchProviders||(n.SearchProviders={}));var t=n.SearchProviders})(App||(App={}))