var App,pointOfInterestTypeProvider,poiTypeProvider;(function(n){(function(t){var e=function(){function n(){this.text=null,this.category=null,this.icon=null}return n}(),i,r,u,f;t.CategoryItem=e,i=function(){function n(){this.text=null,this.type=null,this.icon=null}return n}(),t.GenreItem=i,r=function(){function n(){this.text=null,this.type=null,this.icon=null}return n}(),t.MediaTypeItem=r,u=function(){function n(){this.categories={},this.genres={},this.medias={}}return n}(),t.PointOfInterestTypes=u,f=function(){function t(){this.poiTypeData=null}return t.prototype.Init=function(){log.debug("PointOfInterestTypeProvider","Init()"),this.loadPoITypeData(),this.startDownload()},t.prototype.startDownload=function(){log.debug("PointOfInterestTypeProvider","startDownload(): "+config.poiTypeDataUrl);var t=this,i=new System.Providers.HttpDownloadItem("poiTypeData",config.poiTypeDataUrl,function(i){log.debug("PointOfInterestTypeProvider","startDownload(): Processing: "+config.poiTypeDataUrl),t.poiTypeData=new n.Providers.PointOfInterestTypes,t.poiTypeData=serializer.deserializeJSObject(i,this.poiTypeData),t.savePoITypeData()},function(){log.error("PointOfInterestTypeProvider","Error downloading poiTypeData.")});httpDownloadProvider.enqueueItem("General",System.Providers.HttpDownloadQueuePriority.High,i)},t.prototype.loadPoITypeData=function(){try{log.debug("PointOfInterestTypeProvider","loadPoITypeData()"),this.poiTypeData=new n.Providers.PointOfInterestTypes,this.poiTypeData=serializer.deserializeJSObjectFromFile("poiTypeData",this.poiTypeData)}catch(t){log.error("PointOfInterestTypeProvider","Exception loading PoITypeData: "+t)}},t.prototype.savePoITypeData=function(){log.debug("PointOfInterestTypeProvider","savePoITypeData()"),serializer.serializeJSObjectToFile("poiTypeData",this.poiTypeData)},t.prototype.getMediaTypes=function(){return this.poiTypeData.medias},t.prototype.getGenres=function(){return this.poiTypeData.genres},t.prototype.getCategories=function(){return this.poiTypeData.categories},t.prototype.getMediaType=function(n){var t=null,i="*";return n.mediaTypes().length==1&&(i=n.mediaTypes()[0]),$.each(this.poiTypeData.medias,function(n,r){r.type.toUpperCase()==i.toUpperCase()&&(t=r)}),t||t||log.info("SearchProvider","No mediatype found for type: "+n.mediaTypes().toString()),t},t.prototype.getGenre=function(n){var t=null,i="*";return n&&n.sourceType&&n.sourceType()&&(i=n.sourceType()),$.each(this.poiTypeData.genres,function(n,r){r.type.toUpperCase()==i.toUpperCase()&&(t=r)}),t||log.info("SearchProvider","No genre found for type: "+n.sourceType()),t},t.prototype.getCategory=function(n){var t=null,i=this;return $.each(n.categories(),function(n,r){t==null&&$.each(i.poiTypeData.categories,function(n,i){t==null&&i.category.toUpperCase()==r.toUpperCase()&&(t=i)})}),t||log.info("SearchProvider","No category found for type: "+n.categories().toString()),t},t}(),t.PointOfInterestTypeProvider=f})(n.Providers||(n.Providers={}));var t=n.Providers})(App||(App={})),pointOfInterestTypeProvider=new App.Providers.PointOfInterestTypeProvider,poiTypeProvider=pointOfInterestTypeProvider,startup.addInit(function(){pointOfInterestTypeProvider.Init()},"PointOfInterestTypeProvider")