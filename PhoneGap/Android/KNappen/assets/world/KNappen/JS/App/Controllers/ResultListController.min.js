var App,resultListController;(function(n){(function(n){var t=function(){function n(){this.self=null,this.self=this}return n.prototype.Init=function(){log.debug("ResultListController","Init()");var n=this.self.renderView,t=this;searchController.addSearchResultCallback(function(i,r){n(t,r.items(),null,r.numFound(),r.singleMaxNum())})},n.prototype.renderView=function(n,t,i,r,u){var s,h,f,a,e,c,v,l,o;typeof r=="undefined"&&(r=-1),typeof u=="undefined"&&(u=0),log.debug("ResultListController","Render List View, Searchresult count: "+t.length),s=0,h=!1,i&&(h=!0,$("#routeName").html(i).show()),f=$("#listView #listAccordion"),f.html(""),$.each(t,function(n,r){s++;var u="listItem"+s.toString(),e="deleteItem"+s.toString(),o="";h&&(o='<input type="button" id="'+e+'" value="'+tr.translate("Delete")+'"/>');var c=stringUtils.highlightWord(r.name(),searchController.searchCriteria.query(),"yellow"),l=stringUtils.highlightWord(r.ingress(),searchController.searchCriteria.query(),"yellow"),a='<h3 class="listItemHeader"><img src="'+r.iconCategoryURL()+'" class="listItemCat"/><img src="'+r.iconMediaTypeURL()+'" class="listItemCat"/>'+c+o+'<\/h3><div class="listItemPreview" id="'+u+'">'+(l||r.sourceType())+"<\/div>";f.append(a),$("#"+u).mousedown(function(){return poiController.OpenPreview(r,!1),poiController.OpenDetail(r),!1}),$("#"+e).mousedown(function(){t=t.filter(function(n){return n.id().toString()!=r.id().toString()}),routeController.updateRoute(i,t),resultListController.renderView(resultListController,t,i)})}),f.hasClass("ui-accordion")?f.accordion("refresh"):f.accordion({active:!1,collapsible:!0}),r>0&&(a=$("#listCount"),a.html(tr.translate("{0} hits found",[r])),e=parseInt(Math.ceil(r/(searchController.searchCriteria.rows()*config.numSearchProviders)*100)/100),c=$("<span class ='typcn typcn-arrow-left-thick typiconButton'><\/span>").mousedown(function(){searchController.searchCriteria.pageNumber(searchController.searchCriteria.pageNumber()-1),searchController.searchCriteria.pageNumber()<1&&searchController.searchCriteria.pageNumber(1),searchController.doSearch()}),searchController.searchCriteria.pageNumber()==1&&c.attr("disabled","disabled").css("color","#cccccc"),v=searchController.searchCriteria.pageNumber()+" av "+e,l=$("<span class='typcn typcn-arrow-right-thick typiconButton'><\/span>").mousedown(function(){searchController.searchCriteria.pageNumber(searchController.searchCriteria.pageNumber()+1),searchController.searchCriteria.pageNumber()>e&&searchController.searchCriteria.pageNumber(e),searchController.doSearch()}),searchController.searchCriteria.pageNumber()==e&&l.attr("disabled","disabled").css("color","#cccccc"),o=$("#listPager"),o.html(""),o.append(c),o.append(v),o.append(l))},n}();n.ResultListController=t})(n.Controllers||(n.Controllers={}));var t=n.Controllers})(App||(App={})),resultListController=new App.Controllers.ResultListController,startup.addInit(function(){resultListController.Init()},"ResultListController")